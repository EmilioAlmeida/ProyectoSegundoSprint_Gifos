let offsetSearch=0;const getSearch=async e=>{event.preventDefault(),cleanSearchSuggestions(),$searchInputHero.value=e,$navbarSearchInput.value=e,$searchTitle.innerHTML=e,0===offsetSearch&&($searchResultGallery.innerHTML=""),await fetch(`${searchEndpoint}?api_key=${apiKey}&q=${e}&offset=${offsetSearch}&limit=12&rating=g`).then(e=>e.json()).then(e=>{0==e.data?displayErrorSearch():displaySearchGif(e)}).catch(e=>console.log(e))},displaySearchGif=e=>{$searchResultContainer.classList.remove("hidden"),$verMasbtn.classList.remove("hidden"),0===offsetSearch&&window.scrollTo({top:480,behavior:"smooth"}),e.data.length<12&&($verMasbtn.style.display="none");for(let a=0;a<e.data.length;a++){let t=e.data[a],s=t.images.original.url,n=t.username,r=t.title;const c=document.createElement("div");c.classList.add("gif_container"),c.innerHTML=` \n\t\t<img class="gif" onclick="maximizeGif('${s}','${n}','${r}')" src="${s}" alt="${r}">\n\t\n\t\t<div class="gifActions">\n\t\t\t<div class="gifActions_btn">\n\t\t\t\t<div class="btn favorite" onclick="addToFav('${s}','${n}','${r}')"></div>\n\t\t\t\t<div class="btn download" onclick="downloadGif('${s}','${r}')"></div>\n\t\t\t\t<div class="btn maximize" onclick="maximizeGif('${s}','${n}','${r}')"></div>\n\t\t\t</div>\n\t\t\t<div class="gif_info">\n\t\t\t\t<p class="gif_user">${n}</p>\n\t\t\t\t<p class="gif_title">${r}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t`,$searchResultGallery.appendChild(c)}},displayErrorSearch=()=>{$searchResultContainer.classList.remove("hidden"),$errorContainer.classList.remove("hidden"),$errorContainer.innerHTML='\n\t<div class="error_container" id="error-container">\n\t<img class="" id="error-search" src="assets/icon-busqueda-sin-resultado.svg" alt="Busqueda sin resultado" >\n\t<h4 class="error-search-text">Intenta con otra búsqueda.</h4>\n\t</div>\n\t',$verMasbtn.style.display="none"},verMasButton=()=>{offsetSearch+=12,getSearch($searchInputHero.value?$searchInputHero.value:$navbarSearchInput.value)},getSearchSuggestions=async()=>{cleanSearchSuggestions(),$searchSuggestionList.classList.remove("hidden");const e=$searchInputHero.value;e.length>=1&&await fetch(`${searchAutocomplete}?api_key=${apiKey}&q=${e}&limit=4&rating=g`).then(e=>e.json()).then(e=>{displaySuggestions(e)}).catch(e=>{console.log(e)})},displaySuggestions=e=>{for(let a=0;a<e.data.length;a++){let t=e.data[a].name;const s=document.createElement("li");s.classList.add("SearchSuggestions_item"),s.innerHTML=`\n\t\t<img class="search_btnGray" id="" src="assets/icon-search-gray.svg" alt="Boton Buscar" onclick="getSearch('${t}')">\n\t\t<p class="search_Text" onclick="getSearch('${t}')">${t}</p>`,$searchSuggestionList.appendChild(s)}},cleanResultsContainer=()=>{$searchResultContainer.classList.add("hidden"),$errorContainer.classList.add("hidden"),$verMasbtn.style.display="block",$searchResultGallery.innerHTML="",$navbarSearchInput.placeholder="Busca GIFOS y más",$searchInputHero.placeholder="Busca GIFOS y más"},cleanSearchSuggestions=()=>{$searchSuggestionList.classList.add("hidden"),$searchSuggestionList.innerHTML=""},setActiveSearchBar=()=>{$searchGrayBtn.classList.remove("hidden"),$searchCloseBtn.classList.remove("hidden"),$searchBtn.classList.add("hidden"),$searchSuggestionsContainer.classList.remove("hidden"),$searchContainer.classList.add("searchActive"),$searchSuggestionsContainer.classList.add("searchActiveContainer")},setActiveNavbarSearch=()=>{$navbarSearchGrayBtn.classList.remove("hidden"),$navbarSearchCloseBtn.classList.remove("hidden"),$navbarSearchBtn.classList.add("hidden")},setInactiveSearchBar=()=>{$navbarSearchInput.value="",$searchInputHero.value="",cleanResultsContainer(),cleanSearchSuggestions(),$searchSuggestionsContainer.classList.add("hidden"),$searchBtn.classList.remove("hidden"),$searchCloseBtn.classList.add("hidden"),$searchGrayBtn.classList.add("hidden"),$searchContainer.classList.remove("searchActive")},setInactiveNavbarSearch=()=>{$navbarSearchInput.value="",$searchInputHero.value="",cleanResultsContainer(),$navbarSearchBtn.classList.remove("hidden"),$navbarSearchCloseBtn.classList.add("hidden"),$navbarSearchGrayBtn.classList.add("hidden")};$searchGrayBtn.addEventListener("click",()=>{getSearch($searchInputHero.value)}),$searchInputHero.addEventListener("keypress",e=>{13===e.keyCode&&getSearch($searchInputHero.value)}),$searchInputHero.addEventListener("click",setActiveSearchBar),$searchInputHero.addEventListener("input",setActiveSearchBar),$searchInputHero.addEventListener("input",getSearchSuggestions),$searchInputHero.addEventListener("input",cleanResultsContainer),$searchCloseBtn.addEventListener("click",setInactiveSearchBar),$verMasbtn.addEventListener("click",verMasButton),$navbarSearchGrayBtn.addEventListener("click",()=>{getSearch($navbarSearchInput.value)}),$navbarSearchInput.addEventListener("keypress",e=>{13===e.keyCode&&getSearch($navbarSearchInput.value)}),$navbarSearchInput.addEventListener("click",setActiveNavbarSearch),$navbarSearchInput.addEventListener("input",setActiveNavbarSearch),$navbarSearchCloseBtn.addEventListener("click",setInactiveNavbarSearch),$navbarSearchInput.addEventListener("input",cleanResultsContainer);